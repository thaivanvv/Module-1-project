const users = [
    {name : "Nguyễn Văn A" ,
     age : 15
    },
    {name : "Nguyễn Văn B" ,
     age : 16
    },
    {name : "Nguyễn Văn C" ,
     age : 17
    },
    {name : "Nguyễn Văn D" ,
     age : 18
    },
    {name : "Nguyễn Văn E" ,
     age : 19
    },
    {name : "Nguyễn Văn F" ,
     age : 20
    },
    {name : "Nguyễn Văn I" ,
     age : 21
    },
    {name : "Nguyễn Văn K" ,
     age : 15
    },
    {name : "Nguyễn Văn M" ,
     age : 15
    },
    {name : "Nguyễn Văn N" ,
     age : 15
    },
    {name : "Nguyễn Văn F" ,
     age : 15
    },
  

];

const listUser = document.querySelector("#listUser");
const pagination = document.querySelector("#pagination");




// hàn render ra danh sách người dùng
function renderUser(){
let currentPage = JSON.parse(localStorage.getItem("currentPage")) || 1 ; 
// lấy dữ số trang trên localStorage nếu không có sẵn thì cho la 1



let userPerPage = 5 ; // limited số dữ liệu muốn xuất ra trong trang




let offset = (currentPage - 1 ) * userPerPage ; 
// lấy số giới hạn để chạy vòng lặp for VD: có sẵn 1 và -1 sẽ bằng 0 và sau đó * với số dữ liệu muốn xuất thì ta có là 0
// nhưng ở vòng lặp for ta sex phải đặt số chay bàn đầu thường là 0 nên set la 0 ở số đầu tiên chạy và rồi cho giới hạn chạy
// đến cộng với 5 là ta có 0 1 2 3 4 vậy là đủ 5 dữ liệu cần xuất chi tiết ở bên dưới 




let totalPage = Math.ceil(users.length / userPerPage) ;
// tính tổng số trang bằng cách làm trong và lấy độ dài mảng muốn xuất chia cho số dữ liệu muốn xuất ra một trang là có số trang





let currentListUser = [] ; 
// vì ta ko thể dùng mảng gốc để xuất vì nếu xuất ra sẽ có tất cả dữ liệu không đúng với yêu cầu số lượng dữ liệu muốn xuất ra
// vì vậy ta phải một mảng khác và cho vào rồi xuất ra

for(let i = offset ; i < offset +5 ; i++){ // chi tiết dữ liệu sẽ xuất ra trong một page

    // vì nếu chạy quá độ dài trong mảng sẽ bị lỗi nên phải cho điều kiện là nhỏ hỡn thì push và nếu dài quá sẽ dừng lun
    if(i < users.length){ 
        currentListUser.push(users[i]);
    }else {
        break ;
    }
}


let content = "" ; // chỗ muốn đưa dữ liệu vào VD như body của table
for(let i = 0 ; i < currentListUser.length ; i++){ 
    // currentListUser.length sẽ chỉ có 5 dữ liệu mà sau khi chạy vòng lặp for có giới hạn là offset+5 và offset từ đầu bằng số trang * số dữ liệu muốn xuất
    content += ` <tr>
                <td>${currentListUser[i].name}</td>
                <td>${currentListUser[i].age}</td>
            </tr>` ;
}
listUser.innerHTML = content ;



let contentPagination = "" ; // các thanh chuẩn trang
for(let i = 1 ; i <= totalPage ; i++){
    contentPagination += `<button class="page" value="${i}">${i}</button>` ;
}
pagination.innerHTML = contentPagination ;




// lấy attribute trong các button trên
const listPage = document.querySelectorAll(".page"); 
// cho vòng lặp for tạo sự kiện cho tất cả phần tử nhưng chỉ phần tử dc bấm mới được đẩy lên local và để gọi lại giá trị currentPagecurrentPage
for(let i = 0 ; i < listPage.length ; i++){
    listPage[i].addEventListener("click" ,() => {
        let page = parseInt(listPage[i].getAttribute("value"));
        localStorage.setItem("currentPage",page);
        renderUser();
    })
}
};

renderUser();